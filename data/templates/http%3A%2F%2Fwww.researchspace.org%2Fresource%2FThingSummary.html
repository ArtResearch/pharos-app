<div data-flex-layout='row'>
  [[> rsp:RecordImage]]

  <div class='rs-page__summary' style='width:60%;'>
   
    [[#*inline "values"]]

    
    <div class='rs-entity-fields'>
      <mp-panel collapsible=true default-expanded=true bs-style='[[#if asserted]]info[[else]]success[[/if]]'>
   
        <mp-panel-body>
          <div class="rs-page__summary-content table-responsive">
              
            

       <semantic-table 
      query='PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
						 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
		 				 PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>

					 	 SELECT distinct ?record ?image WHERE 
						{
              {
              ?s owl:sameAs ?? . 
              ?s <https://pharos.artresearch.net/custom/has_original_record> ?record . 
              ?s <https://pharos.artresearch.net/custom/has_provider> ?provider . 
              ?provider crm:image ?image.
              }
              UNION
              {
              ?? <https://pharos.artresearch.net/custom/has_original_record> ?record . 
              ?? <https://pharos.artresearch.net/custom/has_provider> ?provider . 
              ?provider crm:image ?image.
              }
            }' 
            options='{"showFilter": false, "showTableHeading": false}'
      tuple-template='{{> tupleTemplate}}'
>
  <template id='tupleTemplate'>

        <p align="right"><a href={{record.value}} style="margin-top:18px;margin-right:20px;">  
          <img src={{image.value}} style="max-height:50px; max-width:50px; margin: 0 auto;" class="img-rounded">
          </a> </p>
    
  </template>
</semantic-table>

            <table class='table'>
              <thead role="header">
              <tr>
                <th class="rs-page__field-label-holder"></th>
                <th></th>
                <th class="rs-page__count--title"><div class="icon--database fa fa-database"> </div> Source</th>
                <th class="rs-page__count--title"><div class="icon--annotation fa fa-pencil"></div>Annotations</th>
                <th class="rs-page__count--title"><span class="icon--assertion"></span>Assertions</th>
              </tr>
              </thead>
              <tbody></tbody>
            </table>

            <mp-field-visualization
              subject=[[this]]
                                                   
              fields='[[fieldDefinitionsFromQuery "SELECT ?field WHERE { ?field <http://www.metaphacts.com/ontology/fields#domain> crm:E22_Man-Made_Object. OPTIONAL {?field <https://pharos.artresearch.net/field/order> ?w}} ORDER BY ASC(?w) "]]'
              template='{{> rsp:FieldBasedVisualization subject="[[this]]" [[#if asserted]]guess="true"[[/if]]}}'
            ></mp-field-visualization>

            
                     <semantic-table 
      query='PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
						 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
		 				 PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>

					 	 SELECT distinct ?photo  WHERE 
						{
  							?? crm:P138i_is_represented_by ?visual_item.
  							?visual_item crm:P128i_is_carried_by ?photo.
  							?photo crm:P2_has_type <http://vocab.getty.edu/aat/300046300>.
              
            }' 
            options='{"showFilter": false, "showTableHeading": false}'
      tuple-template='{{> photos}}'
>
 <template id='photos'>

        <p align="right"><a href={{record.value}} style="margin-top:18px;margin-right:20px;"> {{photo.value}}
          <img src={{image.value}} style="max-height:50px; max-width:50px; margin: 0 auto;" class="img-rounded">
          </a> </p>
    
  </template>    
</semantic-table>
               
               
            <div style="margin-top:18px;margin-left:20px;">
              <mp-overlay-dialog title="All available fields for [[singleValueFromSelect 'SELECT ?label WHERE {?? (rdfs:label | rso:displayLabel) ?label}']]" bs-size='lg'>
                <mp-overlay-dialog-trigger>
                  <strong><a>Assert new value...</a></strong>
                </mp-overlay-dialog-trigger>
                <mp-overlay-dialog-content>
                  <mp-page-loader iri="http://www.researchspace.org/resource/AllFieldsModal" urlqueryparam-type='crm:E22_Man-Made_Object'></mp-page-loader>
                </mp-overlay-dialog-content>
              </mp-overlay-dialog> 
            </div>
        
          </div>
        </mp-panel-body>
      </mp-panel>
    </div>
    [[/inline]]  

    [[> values ]]
    
  </div>
</div>
