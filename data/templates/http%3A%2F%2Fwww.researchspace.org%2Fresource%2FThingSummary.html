<div data-flex-layout='row'>
  [[> rsp:RecordImage]]

  <div class='rs-page__summary' style='width:60%;'>
   
    [[#*inline "values"]]

    
    <div class='rs-entity-fields'>
      <mp-panel collapsible=true default-expanded=true bs-style='[[#if asserted]]info[[else]]success[[/if]]'>
   
        <mp-panel-body>
          <div class="rs-page__summary-content table-responsive">
              
               [[#if (ask 'ASK {{?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://pharos.artresearch.net/resource/type/pharos> .}}')]]
                     
            <semantic-table 
      query='PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
											 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
		 									 PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>

											SELECT ?record ?image WHERE {?s owl:sameAs ?? . ?s <https://pharos.artresearch.net/custom/has_original_record> ?record . ?s <https://pharos.artresearch.net/custom/has_provider> ?provider . ?provider crm:image ?image .}' 
                            options='{"showFilter": false, "showTableHeading": false}'
      tuple-template='{{> tupleTemplate}}'
>
  <template id='tupleTemplate'>

        <p align="right"> <a href={{record.value}} style="margin-top:18px;margin-right:20px;">  
          <img src={{image.value}} style="max-height:50px; max-width:50px; margin: 0 auto;" class="img-rounded">
          </a> </p>
    
  </template>
</semantic-table>
            
            
            
             [[/if]]
            
        
            <p align="right"><a href=[[singleValueFromSelect 'SELECT ?record WHERE {?? <https://pharos.artresearch.net/custom/has_original_record> ?record}']] style="margin-top:18px;margin-left:20px;">Source Record</a></p>

            
            <table class='table'>
              <thead role="header">
              <tr>
                <th class="rs-page__field-label-holder"></th>
                <th></th>
                <th class="rs-page__count--title"><div class="icon--database fa fa-database"> </div> Source</th>
                <th class="rs-page__count--title"><div class="icon--annotation fa fa-pencil"></div>Annotations</th>
                <th class="rs-page__count--title"><span class="icon--assertion"></span>Assertions</th>
              </tr>
              </thead>
              <tbody></tbody>
            </table>
      
             [[#if (ask 'ASK {{?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://pharos.artresearch.net/resource/pharos/type/pharosrecord> .}}')]]
              
            YOU ARE NOW ON THE PHAROS RECORD
            
  					<semantic-query
                query='PREFIX owl: <http://www.w3.org/2002/07/owl#>
                    SELECT ?sameAsThis WHERE {
                        { ?? owl:sameAs ?sameAsThis }
                        UNION
                        { ?sameAsThis owl:sameAs ?? }
                        UNION
                        { BIND(?? as ?sameAsThis) }
                      }'
                 template='{{> perSubject}}'
                >
              <template id="perSubject">
                <div>
                  {{#each bindings}}
  									<mp-page-loader iri="http://www.researchspace.org/resource/FieldBasedVisualizationLazyLoader" [[#if asserted]]urlqueryparam-guess="true"[[/if]] urlqueryparam-subject='{{sameAsThis.value}}'></mp-page-loader>
                  {{/each}}
                </div>
              </template>
            </semantic-query>
            
            <mp-field-visualization
                subject='[[this]]'
                fields='[[fieldDefinitionsFromQuery "SELECT ?field WHERE { ?field <http://www.metaphacts.com/ontology/fields#domain> crm:E22_Man-Made_Object. ?field <http://www.metaphacts.com/ontology/fields#category> <https://pharos.artresearch.net/category/work> . OPTIONAL {?field <https://pharos.artresearch.net/field/order> ?w}} ORDER BY ASC(?w) "]]'
                template='{{> rsp:FieldBasedVisualization subject="[[this]]" [[#if asserted]]guess="true"[[/if]]}}'
             ></mp-field-visualization> 
                  
            [[/if]]
            
            
            
             [[#if (ask 'ASK {{?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://pharos.artresearch.net/resource/type/pharos> .}}')]]
          
            <mp-field-visualization
              subject=[[this]]
                                                   
              fields='[[fieldDefinitionsFromQuery "SELECT ?field WHERE { ?field <http://www.metaphacts.com/ontology/fields#domain> crm:E22_Man-Made_Object. ?field <http://www.metaphacts.com/ontology/fields#category> <https://pharos.artresearch.net/category/work> . OPTIONAL {?field <https://pharos.artresearch.net/field/order> ?w}} ORDER BY ASC(?w) "]]'
              template='{{> rsp:FieldBasedVisualization subject="[[this]]" [[#if asserted]]guess="true"[[/if]]}}'
            ></mp-field-visualization>

             [[/if]]
            

                [[#if (ask 'ASK {{?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <http://vocab.getty.edu/aat/300133025> .}}')]]
            
            <mp-field-visualization
              subject=[[this]]
                                                   
              fields='[[fieldDefinitionsFromQuery "SELECT ?field WHERE { ?field <http://www.metaphacts.com/ontology/fields#domain> crm:E22_Man-Made_Object. ?field <http://www.metaphacts.com/ontology/fields#category> <https://pharos.artresearch.net/category/work> . OPTIONAL {?field <https://pharos.artresearch.net/field/order> ?w}} ORDER BY ASC(?w) "]]'
              template='{{> rsp:FieldBasedVisualization subject="[[this]]" [[#if asserted]]guess="true"[[/if]]}}'
            ></mp-field-visualization>
  
       
             
            
             [[/if]]

           [[#if (ask 'ASK {{?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <http://vocab.getty.edu/aat/300046300> .}}')]]
            <mp-field-visualization
              subject=[[this]]
              fields='[[fieldDefinitionsFromQuery "SELECT ?field WHERE { ?field <http://www.metaphacts.com/ontology/fields#domain> crm:E22_Man-Made_Object.   ?field <http://www.metaphacts.com/ontology/fields#category> <https://pharos.artresearch.net/category/photo> . OPTIONAL {?field <https://pharos.artresearch.net/field/order> ?w}} ORDER BY ASC(?w) "]]'
              template='{{> rsp:FieldBasedVisualization subject="[[this]]" [[#if asserted]]guess="true"[[/if]]}}'
            ></mp-field-visualization>

           [[/if]]

            <div style="margin-top:18px;margin-left:20px;">
              <mp-overlay-dialog title="All available fields for [[singleValueFromSelect 'SELECT ?label WHERE {?? (rdfs:label | rso:displayLabel) ?label}']]" bs-size='lg'>
                <mp-overlay-dialog-trigger>
                  <strong><a>Assert new value...</a></strong>
                </mp-overlay-dialog-trigger>
                <mp-overlay-dialog-content>
                  <mp-page-loader iri="http://www.researchspace.org/resource/AllFieldsModal" urlqueryparam-type='crm:E22_Man-Made_Object'></mp-page-loader>
                </mp-overlay-dialog-content>
              </mp-overlay-dialog> 
            </div>
        
          </div>
        </mp-panel-body>
      </mp-panel>
    </div>
    [[/inline]]  

    [[> values ]]
    
  </div>
</div>
